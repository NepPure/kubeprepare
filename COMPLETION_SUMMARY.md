# é¡¹ç›®ä¿®å¤å®Œæˆæ€»ç»“

## ğŸ¯ ä»»åŠ¡å®Œæˆæƒ…å†µ

### âœ… CI/CD æŒç»­é›†æˆé…ç½® (å·²å®Œæˆ)
- åˆ›å»º GitHub Actions å·¥ä½œæµ `.github/workflows/build-release.yml`
- é…ç½®æ‰“ tag è‡ªåŠ¨è§¦å‘æ„å»ºå’Œå‘å¸ƒ
- æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ Release å’Œä¸Šä¼ äº§ç‰©

### âœ… online_prepare.sh è„šæœ¬ä¿®å¤ (å·²å®Œæˆ)

## ğŸ“‹ ä¿®å¤è¯¦æƒ…

### å‘ç°çš„é—®é¢˜
1. **ç‰ˆæœ¬å·æ ¼å¼ä¸ä¸€è‡´** - å˜é‡å®šä¹‰ä¸ URL ä¸­çš„æ ¼å¼ä¸åŒ¹é…
2. **æ–‡ä»¶åé”™è¯¯** - KubeEdge æ–‡ä»¶åç¼ºå°‘ `v` å‰ç¼€
3. **ç›®å½•è·¯å¾„é”™è¯¯** - è§£å‹åçš„ç›®å½•åä¸è„šæœ¬å¼•ç”¨ä¸ä¸€è‡´
4. **ç¼ºå°‘é”™è¯¯å¤„ç†** - ä¸‹è½½å¤±è´¥ä¸é€€å‡º
5. **ç”¨æˆ·ä½“éªŒå·®** - ç¼ºå°‘æ¸…æ™°çš„è¿›åº¦æç¤º

### ä¿®å¤å†…å®¹

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ | çŠ¶æ€ |
|------|------|--------|------|
| ç‰ˆæœ¬å·å‰ç¼€æ··ä¹± | å˜é‡ä¸º `v1.22.0`ï¼ŒURLéœ€è¦ `v` å‰ç¼€ | æ”¹ä¸º `1.22.0`ï¼ŒURLä¸­æ·»åŠ  `v` | âœ… |
| KubeEdge æ–‡ä»¶åé”™è¯¯ | ç¼ºå°‘ `v` å‰ç¼€ | æ”¹ä¸º `kubeedge-v${VER}` | âœ… |
| ç›®å½•å¼•ç”¨é”™è¯¯ | ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `kubeedge/` è€Œå®é™…ä¸º `kubeedge-v1.22.0-linux-amd64/` | ä½¿ç”¨å®Œæ•´ç›®å½•å | âœ… |
| wget å¤±è´¥æ—¶ç»§ç»­ | æ— é”™è¯¯æ£€æŸ¥ | æ·»åŠ  `\|\| { exit 1; }` | âœ… |
| è¿›åº¦æç¤ºä¸æ¸…æ¥š | æ— ä¸­é—´åé¦ˆ | æ·»åŠ è¯¦ç»†çš„è¿›åº¦æ¶ˆæ¯å’ŒæˆåŠŸæç¤º | âœ… |

## ğŸ“¦ æ–‡ä»¶å˜æ›´æ¸…å•

### æ–°å»ºæ–‡ä»¶
- `.github/workflows/build-release.yml` - GitHub Actions CI/CD å·¥ä½œæµ
- `scripts/create-release.sh` - å‘å¸ƒåŠ©æ‰‹è„šæœ¬
- `CI_CD.md` - CI/CD ä½¿ç”¨æ–‡æ¡£
- `TEST_REPORT.md` - æµ‹è¯•æŠ¥å‘Š

### ä¿®æ”¹æ–‡ä»¶
- `online_prepare.sh` - è„šæœ¬ä¿®å¤å’Œæ”¹è¿›

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç¯å¢ƒ
- OS: Ubuntu 24.04.3 LTS
- ç½‘ç»œ: åœ¨çº¿ç¯å¢ƒ
- è„šæœ¬æ‰§è¡Œæ—¶é—´: ~2.5 åˆ†é’Ÿ

### æµ‹è¯•ç»“æœ

```bash
âœ“ æˆåŠŸä¸‹è½½æ‰€æœ‰ä¾èµ–:
  âœ“ KubeEdge v1.22.0 (45.7 MB)
  âœ“ containerd v1.6.20 (42.1 MB)
  âœ“ runc v1.1.9 (10.7 MB)
  âœ“ CNI plugins v1.4.0 (46.9 MB)

âœ“ æˆåŠŸæå–å’Œæ‰“åŒ…:
  âœ“ edgecore äºŒè¿›åˆ¶æ–‡ä»¶
  âœ“ containerd åŠç›¸å…³å·¥å…·
  âœ“ CNI æ’ä»¶é›†åˆ
  âœ“ é…ç½®æ¨¡æ¿æ–‡ä»¶

âœ“ æœ€ç»ˆè¾“å‡º:
  Location: /tmp/kubeedge-test-v3/kubeedge-edge-offline-v1.22.0.tar.gz
  Size: 116M âœ“
```

### åŒ…å†…å®¹éªŒè¯
```
kubeedge-edge-offline-v1.22.0.tar.gz
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ edgecore                    # KubeEdge è¾¹ç¼˜èŠ‚ç‚¹æ ¸å¿ƒ
â”œâ”€â”€ containerd/
â”‚   â””â”€â”€ bin/
â”‚       â”œâ”€â”€ containerd             # å®¹å™¨è¿è¡Œæ—¶
â”‚       â”œâ”€â”€ runc                    # OCI è¿è¡Œæ—¶
â”‚       â”œâ”€â”€ ctr                     # å®¹å™¨ CLI
â”‚       â””â”€â”€ containerd-shim-*       # è¿è¡Œæ—¶ shim
â”œâ”€â”€ cni/
â”‚   â””â”€â”€ bin/                        # CNI æ’ä»¶
â”‚       â”œâ”€â”€ bridge
â”‚       â”œâ”€â”€ loopback
â”‚       â”œâ”€â”€ host-local
â”‚       â”œâ”€â”€ portmap
â”‚       â””â”€â”€ ...
â””â”€â”€ etc/
    â””â”€â”€ edgecore.yaml.tmpl         # edgecore é…ç½®æ¨¡æ¿
```

## ğŸš€ ä½¿ç”¨è¯´æ˜

### 1. æœ¬åœ°æµ‹è¯• (åœ¨çº¿ç¯å¢ƒ)
```bash
# åœ¨è”ç½‘æœºå™¨ä¸Šè¿è¡Œ
bash online_prepare.sh /tmp/kubeedge-offline

# è¾“å‡º
âœ“ Offline package created successfully!
  Location: /tmp/kubeedge-offline/kubeedge-edge-offline-v1.22.0.tar.gz
  Size: 116M
```

### 2. å‘å¸ƒåˆ° GitHub Releases (è‡ªåŠ¨åŒ–)
```bash
# æ–¹æ³•ä¸€: ä½¿ç”¨åŠ©æ‰‹è„šæœ¬
bash scripts/create-release.sh 1.22.0

# æ–¹æ³•äºŒ: æ‰‹åŠ¨æ“ä½œ
git tag v1.22.0
git push origin v1.22.0

# åç»­: GitHub Actions è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒ
# è¿›åº¦: https://github.com/NepPure/kubeprepare/actions
```

### 3. è¾¹ç¼˜æœºç¦»çº¿å®‰è£…
```bash
# åœ¨è¾¹ç¼˜æœºä¸Šè¿è¡Œ
sudo ./offline_install.sh \
  kubeedge-edge-offline-v1.22.0.tar.gz \
  "wss://CLOUD_IP:10000/edge/NODE_ID" \
  "TOKEN" \
  NODE_NAME
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | ç”¨é€” | ä½ç½® |
|------|------|------|
| CI_CD.md | CI/CD é…ç½®å’Œä½¿ç”¨æŒ‡å— | `/CI_CD.md` |
| TEST_REPORT.md | è¯¦ç»†æµ‹è¯•æŠ¥å‘Š | `/TEST_REPORT.md` |
| build-release.yml | GitHub Actions å·¥ä½œæµ | `/.github/workflows/build-release.yml` |
| create-release.sh | å‘å¸ƒåŠ©æ‰‹è„šæœ¬ | `/scripts/create-release.sh` |

## âœ¨ æ”¹è¿›å»ºè®® (å¯é€‰)

### çŸ­æœŸ
- [ ] æ·»åŠ ç£ç›˜ç©ºé—´é¢„æ£€æŸ¥
- [ ] ä¸º wget æ·»åŠ é‡è¯•æœºåˆ¶
- [ ] éªŒè¯ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´æ€§ (SHA256)

### ä¸­æœŸ
- [ ] æ”¯æŒå¤šæ¶æ„æ„å»º (arm64, etc)
- [ ] æ”¯æŒå¤šä¸ª KubeEdge ç‰ˆæœ¬åŒæ—¶æ„å»º
- [ ] ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨ (OSS/S3)

### é•¿æœŸ
- [ ] Web UI å‘å¸ƒç®¡ç†ç•Œé¢
- [ ] è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ£€æµ‹å’Œæ›´æ–°
- [ ] ç¦»çº¿åŒ…åˆ†å‘ç½‘ç»œ

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¦æ±‚**: æ‰§è¡Œ `online_prepare.sh` éœ€è¦è¿æ¥åˆ° GitHub
2. **ç£ç›˜ç©ºé—´**: è‡³å°‘éœ€è¦ 200MB ä¸´æ—¶ç©ºé—´
3. **ç‰ˆæœ¬ç®¡ç†**: ä¿®æ”¹ `KUBEEDGE_VER` ç­‰å˜é‡æ¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬
4. **æ–‡ä»¶æƒé™**: è„šæœ¬éœ€è¦åˆ›å»ºå’Œä¿®æ”¹ç›®å½•çš„æƒé™

## ğŸ“ å­¦ä¹ èµ„æº

- KubeEdge å®˜æ–¹: https://kubeedge.io
- GitHub Actions æ–‡æ¡£: https://docs.github.com/en/actions
- containerd æ–‡æ¡£: https://containerd.io
- CNI è§„èŒƒ: https://github.com/containernetworking/cni

---

**æœ€åæ›´æ–°**: 2025-12-06  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
